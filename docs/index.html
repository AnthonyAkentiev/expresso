<html>
	<head>
		<title>Expresso - TDD Framework For Node</title>
	</head>
	<body>
		<div id="wrapper">
			<h1>Expresso</h1>
<div class='mp'>
<p><a href="http://github.com/visionmedia/expresso">Expresso</a> is a JavaScript <a href="http://en.wikipedia.org/wiki/Test-driven_development">TDD</a> framework written for <a href="http://nodejs.org">nodejs</a>. Expresso is extremely fast, and is packed with features such as additional assertion methods, code coverage reporting, CI support, and more.</p>

<h2 id="Features">Features</h2>

<ul>
<li>light-weight</li>
<li>intuitive async support</li>
<li>intuitive test runner executable</li>
<li>test coverage support and reporting via <a href="http://github.com/visionmedia/node-jscoverage">node-jscoverage</a></li>
<li>uses and extends the core <em>assert</em> module</li>
<li><code>assert.eql()</code> alias of <code>assert.deepEqual()</code></li>
<li><code>assert.response()</code> http response utility</li>
<li><code>assert.includes()</code></li>
<li><code>assert.isNull()</code></li>
<li><code>assert.isUndefined()</code></li>
<li><code>assert.isNotNull()</code></li>
<li><code>assert.isNotUndefined()</code></li>
<li><code>assert.match()</code></li>
<li><code>assert.length()</code></li>
</ul>


<h2 id="Installation">Installation</h2>

<p>To install both expresso <em>and</em> node-jscoverage run
the command below, which will first compile node-jscoverage:</p>

<pre><code>$ make install
</code></pre>

<p>To install expresso alone without coverage reporting run:</p>

<pre><code>$ make install-expresso
</code></pre>

<p>Install via npm:</p>

<pre><code>$ npm install expresso
</code></pre>

<h2 id="Assert-Utilities">Assert Utilities</h2>

<h3 id="assert-isNull-val-msg-">assert.isNull(val[, msg])</h3>

<p>Asserts that the given <em>val</em> is <em>null</em>.</p>

<pre><code>assert.isNull(null);
</code></pre>

<h3 id="assert-isNotNull-val-msg-">assert.isNotNull(val[, msg])</h3>

<p>Asserts that the given <em>val</em> is not <em>null</em>.</p>

<pre><code>assert.isNotNull(undefined);
assert.isNotNull(false);
</code></pre>

<h3 id="assert-isUndefined-val-msg-">assert.isUndefined(val[, msg])</h3>

<p>Asserts that the given <em>val</em> is <em>undefined</em>.</p>

<pre><code>assert.isUndefined(undefined);
</code></pre>

<h3 id="assert-isNotUndefined-val-msg-">assert.isNotUndefined(val[, msg])</h3>

<p>Asserts that the given <em>val</em> is not <em>undefined</em>.</p>

<pre><code>assert.isNotUndefined(null);
assert.isNotUndefined(false);
</code></pre>

<h3 id="assert-match-str-regexp-msg-">assert.match(str, regexp[, msg])</h3>

<p>Asserts that the given <em>str</em> matches <em>regexp</em>.</p>

<pre><code>assert.match('foobar', /^foo(bar)?/);
assert.match('foo', /^foo(bar)?/);
</code></pre>

<h3 id="assert-length-val-n-msg-">assert.length(val, n[, msg])</h3>

<p>Assert that the given <em>val</em> has a length of <em>n</em>.</p>

<pre><code>assert.length([1,2,3], 3);
assert.length('foo', 3);
</code></pre>

<h3 id="assert-eql-a-b-msg-">assert.eql(a, b[, msg])</h3>

<p>Assert that object <em>b</em> is equal to object <em>a</em>. This is an
alias for the core <em>assert.deepEqual()</em> method which does complex
comparisons, opposed to <em>assert.equal()</em> which uses <em>==</em>.</p>

<pre><code>assert.eql('foo', 'foo');
assert.eql([1,2], [1,2]);
assert.eql({ foo: 'bar' }, { foo: 'bar' });
</code></pre>

<h3 id="assert-includes-val-obj-msg-">assert.includes(val, obj[, msg])</h3>

<p>Assert that <em>obj</em> is within <em>val</em>. This method supports <em>Array_s
and </em>Strings_s.</p>

<pre><code>assert.includes([1,2,3], 3);
assert.includes('foobar', 'foo');
assert.includes('foobar', 'bar');
</code></pre>

<h2 id="expresso-1-">expresso(1)</h2>

<p>To run a single test suite (file) run:</p>

<pre><code>$ expresso test/a.test.js
</code></pre>

<p>To run several suites we may simply append another:</p>

<pre><code>$ expresso test/a.test.js test/b.test.js
</code></pre>

<p>We can also pass a whitelist of tests to run within all suites:</p>

<pre><code>$ expresso --only "foo()" --only "bar()"
</code></pre>

<p>Or several with one call:</p>

<pre><code>$ expresso --only "foo(), bar()"
</code></pre>

<p>Globbing is of course possible as well:</p>

<pre><code>$ expresso test/*
</code></pre>

<p>When expresso is called without any files, <em>test/*</em> is the default,
so the following is equivalent to the command above:</p>

<pre><code>$ expresso
</code></pre>

<p>If you wish to unshift a path to <code>require.paths</code> before
running tests, you may use the <code>-I</code> or <code>--include</code> flag.</p>

<pre><code>$ expresso --include lib test/*
</code></pre>

<p>The previous example is typically what I would recommend, since expresso
supports test coverage via <a href="http://github.com/visionmedia/node-jscoverage">node-jscoverage</a> (bundled with expresso),
so you will need to expose an instrumented version of you library.</p>

<p>To instrument your library, simply run <a href="http://github.com/visionmedia/node-jscoverage">node-jscoverage</a>,
passing the <em>src</em> and <em>dest</em> directories:</p>

<pre><code>$ node-jscoverage lib lib-cov
</code></pre>

<p>Now we can run our tests again, using the <em>lib-cov</em> directory that has been
instrumented with coverage statements:</p>

<pre><code>$ expresso -I lib-cov test/*
</code></pre>

<p>The output will look similar to below, depending on your test coverage of course :)</p>

<pre><code>Test Coverage
+--------------------------------+----------+------+------+--------+
| filename                       | coverage | LOC  | SLOC | missed |
+--------------------------------+----------+------+------+--------+
| a.js                           |    90.00 |   26 |   10 |      1 |
| b.js                           |   100.00 |   12 |    5 |      0 |
+--------------------------------+----------+------+------+--------+
                                 |    93.33 |   38 |   15 |      1 |
                                 +----------+------+------+--------+

bar.js:

  1 |   | 
  2 | 1 | exports.bar = function(msg){
  3 | 1 |     return msg || 'bar';
  4 |   | };


foo.js:

   1 |   | 
   2 | 1 | exports.foo = function(msg){
   3 | 2 |     if (msg) {
   4 | 0 |         return msg;
   5 |   |     } else {
   6 | 2 |         return generateFoo();
   7 |   |     }
   8 |   | };
   9 |   | 
  10 | 1 | function generateFoo() {
  11 | 2 |     return 'foo';
  12 |   | }
  13 |   | 
  14 | 1 | function Foo(msg){
  15 | 0 |     this.msg = msg || 'foo';
  16 |   | }
</code></pre>

<p>To make this process easier expresso has the <code>-c</code> or <code>--cov</code> which essentiall
does the same as the two commands above. The following two commands will
run the same tests, however one will auto-instrument, and unshift <em>lib-cov</em>,
and the other will run tests normally:</p>

<pre><code>$ expresso -I lib test/*
$ expresso -I lib --cov test/*
</code></pre>

<p>Currently coverage is bound to the <em>lib</em> directory, however in the
future <code>--cov</code> will most likely accept a path.</p>

</div>
		</div>
	</body>
</html>